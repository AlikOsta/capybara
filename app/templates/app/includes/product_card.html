<!-- Обновить app/templates/app/includes/product_card.html -->
<div class="position-relative">
    <a href="{% url 'app:product_detail' pk=product.pk %}" class="text-decoration-none text-dark">
        <div class="card h-100">
            <img src="{{ product.image.url }}" class="card-img-top object-fit-cover" style="height: 200px;" alt="{{ product.title }}">
            <div class="card-body p-2">
                <h6 class="card-title text-truncate mb-1">{{ product.title }}</h6>
                <p class="card-text fw-bold mb-1">{{ product.price }} {{ product.currency }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">{{ product.city }}</small>
                    <small class="text-muted">{{ product.created_at|date:"d.m.Y" }}</small>
                </div>
            </div>
        </div>
    </a>
    
    {% if user.is_authenticated and user != product.author %}
    <button class="btn btn-sm position-absolute top-0 end-0 m-2 text-danger bg-white rounded-circle p-1 shadow-sm favorite-btn" 
            data-product-id="{{ product.id }}" 
            data-is-favorite="{% if product.id in favorite_products %}true{% else %}false{% endif %}">
        <i class="bi {% if product.id in favorite_products %}bi-heart-fill{% else %}bi-heart{% endif %}"></i>
    </button>
    {% endif %}
</div>
